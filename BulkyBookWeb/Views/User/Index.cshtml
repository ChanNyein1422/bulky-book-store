<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-4">
        <form class="loginform mt-5" >
            <div>
                <h4 class="text-center">Login</h4>
            </div>
            <div class="mt-3">
                <label>Email</label>
                <input type="email" name="Email" class="form-control mt-2" id="txt-email" />
            </div>
            <div class="mt-3">
                <label>Password</label>
                <input type="password" name="Password" class="form-control mt-2" id="txt-password" />
            </div>

            <div class="mt-5">
                <a class="nav-link text-primary" asp-area="" asp-controller="User" asp-action="_RegisterView">No Account Yet? Create Here</a>
                <button class="btn btn-primary float-end" type="submit">Login</button>
            </div>
        </form>
    </div>
 </div>

@section scripts{
    <script>
        "use strict";
        $(function () {
            login();
        })

        function login(){
            $('.loginform').submit(function(e){
                e.preventDefault();

                $.ajax({
                    cache: false,
                    url: "../User/Login",
                    type: "Post",
                    data:{
                        Email : $("#txt-email").val(),
                        Password : $("#txt-password").val(),
                    },
                    beforeSend: function(){
                        $('.btn').prop('disabled', true);
                    },
                    success: function(response){
                        if (response == "Success"){
                            window.location = "../home";
                        }
                        else{
                            $('.btn').prop('diabled', false);
                            alert("Wrong Credentials");
                        }
                    },
                    complete: function(){
                        $('.btn').prop("disabled", false);
                    }
                });
            });
        }

        function get_users() {
            $.ajax({
                cache: false,
                url: '@Url.Action("_UserList","User")'
            });
        }
        function confirm_delete(id) {
            let result = confirm("Are you sure want to delete this account?");
            if (result) {
                delete_account(id);
            }
        }

        function delete_account(id) {
            $.ajax({
                cache: false,
                url: '@Url.Action("Delete","User")',
                data: {
                    id: id
                },
                success: function (response) {
                    if (response == 1) {
                        alert("Account Deleted!");

                    }
                    else {
                        alert("Wrong Credentials");
                    }
                },
                complete: function () {
                    get_users();
                }
            });
        }
     

    </script>
}